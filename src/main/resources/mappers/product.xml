<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.kmarket2.dao.ProductDAO">

	<insert id=""></insert>
	<select id="selectProducts" resultType="kr.co.kmarket2.vo.ProductVO">
		SELECT a.*, b.c1Name, c.c2Name FROM `km_product` AS a 
		JOIN `km_product_cate1` AS b ON a.prodCate1 = b.cate1
		JOIN `km_product_cate2` AS c ON b.cate1 = c.cate1
		AND a.prodCate2=c.cate2 WHERE a.prodCate1=#{cate2} and a.prodCate2=#{cate2}
		<if test="sort != null and !sort.equals('')">
			<choose>
				<when test="sort == 'row'">
					order by `price` esc
				</when>
				<otherwise>
					order by #{sort} desc
				</otherwise>
			</choose>
		</if>
		
	</select>
	<select id="selectCountTotal" resultType="int">
		select count(`prodNo`) from `km_product` WHERE prodCate1=#{cate1} AND prodCate2=#{cate2};
	</select>
	


</mapper>